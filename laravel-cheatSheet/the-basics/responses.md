# Responses

* [Creating Responses](#creating-responses)
    * Response Objects
    * Attaching Headers To Responses
* [Redirects](#redirects)
    * Redirecting To Named Routes
    * **Populating Parameters Via Eloquent Models**
    * **Redirecting To Controller Actions**
    * Redirecting To External Domains
    * Redirecting With Flashed Session Data
* [Other Response Types](#other-response-types)
    * View Responses
    * JSON Responses
    * **File Downloads**
    * **File Responses**
* [Response Macros](#response-macros)


### Creating Responses
```php
// return string
Route::get('/', function () {
    return 'Hello World';
});

// return array
Route::get('/', function () {
    return [1, 2, 3];
});
```
**Response Objects** <br>
Returning a full <code>Response</code> instance allows you to customize the response's HTTP status code and headers. A <code>Response</code> instance inherits from the  <code>Symfony\Component\HttpFoundation\Response</code> class.
```php
Route::get('home', function () {
    return response('Hello World', 200)
                  ->header('Content-Type', 'text/plain');
});
```
**Attaching Headers To Responses**
```php
return response($content)
            ->header('Content-Type', $type)
            ->header('X-Header-One', 'Header Value')
            ->header('X-Header-Two', 'Header Value');

// or
return response($content)
            ->withHeaders([
                'Content-Type' => $type,
                'X-Header-One' => 'Header Value',
                'X-Header-Two' => 'Header Value',
            ]);
```
**Attaching Cookies To Responses**
```php
return response($content)
                ->header('Content-Type', $type)
                ->cookie('name', 'value', $minutes);
```
[Please read more about cookies here](./requests.md#cookies)

**Cookies & Encryption** <br>
if you would like to disable encryption for a subset of cookies generated by your application, you may use the <code>$except</code> property of the <code>App\Http\Middleware\EncryptCookies</code> middleware.
```php
protected $except = [
    'cookie_name',
];
```

### Redirects
```php
Route::get('dashboard', function () {
    return redirect('home/dashboard');
});
```
Sometimes you may wish to redirect the user to their previous location. by using the global <code>back</code> helper function. Since this feature utilizes the <code>session</code>.
```php
Route::post('user/profile', function () {
    // Validate the request...

    return back()->withInput();
});
```
**Redirecting To Named Routes**
```php
return redirect()->route('login');

// with parameters
return redirect()->route('profile', ['id' => 1]);
```
**Populating Parameters Via Eloquent Models**
```php
// For a route with the following URI: profile/{id}

return redirect()->route('profile', [$user]);
```
If you would like to customize the value that is placed in the route parameter. From your <code>model</code>.
```php
public function getRouteKey()
{
    return $this->slug;
}
```
**Redirecting To Controller Actions**
```php
return redirect()->action('HomeController@index');

return redirect()->action(
    'UserController@profile', ['id' => 1]
);
```
**Redirecting To External Domains**
```php
return redirect()->away('https://www.google.com');
```
**Redirecting With Flashed Session Data**
```php
Route::post('user/profile', function () {
    // Update the user's profile...

    return redirect('dashboard')->with('status', 'Profile updated!');
});
```
```php
@if (session('status'))
    <div class="alert alert-success">
        {{ session('status') }}
    </div>
@endif
```

### Other Response Types
**View Responses**
```php
return response()
            ->view('hello', $data, 200)
            ->header('Content-Type', $type);
```
if you do not need to pass a custom HTTP status code or custom headers, you should use the global <code>view</code> helper function.

**JSON Responses**
```php
return response()->json([
    'name' => 'Abigail',
    'state' => 'CA'
]);
```
If you would like to create a <code>JSONP</code> response.
```php
return response()
            ->json(['name' => 'Abigail', 'state' => 'CA'])
            ->withCallback($request->input('callback'));
```
**File Downloads**
```php
return response()->download($pathToFile);

return response()->download($pathToFile, $name, $headers);

return response()->download($pathToFile)->deleteFileAfterSend(true);
```
Streamed Downloads (download from outside resource)
```php
return response()->streamDownload(function () {
    echo GitHub::api('repo')
                ->contents()
                ->readme('laravel', 'laravel')['contents'];
}, 'laravel-readme.md');
```
**File Responses**
To show the file not download it.
```php
return response()->file($pathToFile);

return response()->file($pathToFile, $headers);
```

### Response Macros
If you would like to define a custom response that you can re-use in a variety of your routes and controllers. From your service providers.
```php
public function boot()
{
    Response::macro('caps', function ($value) {
        return Response::make(strtoupper($value));
    });
}

// use it like
return response()->caps('foo');
```
